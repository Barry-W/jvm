第四章 虚拟机性能监控与故障处理工具

     4.1 概述
        系统定位问题，知识、经验是关键基础，数据是依据，工具是运用知识处理数据的手段。数据包括：运行日志、异常堆栈、GC日志、线程快照、堆转储快照等。
        适当使用虚拟机监控和分析工具可以大块分析数据和定位解决问题的速度，但也注意，工具永远都是知识技能的一层包装。
     
     
     4.2 JDK的命令行工具
        JDK的bin目录中有“java.exe”和“javac.exe”两个命令行工具。
     
     
      4.2.1 jps：虚拟机进程状况工具
          JDK很多小工具名字都参考了Unix命令的命名方式，jps（JVM Process Status Tool）
          作用：可以列出正在运行的虚拟机进程，并显示虚拟机的执行主类的名称，以及这些进程的本地虚拟机的唯一ID（LVMID，Local Virtual Machine Identifer）
          多个虚拟机进程，无法根据进程名称定位，只能依赖jps命令显示主类的功能来区分。
     
      4.2.2 jstat：虚拟机统计信息监视工具
          jstat（JVM Statistics Monitoring Tool）是用于监视虚拟机各种运行状态信息的命令行工具。
          可以显示本地或远程虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据。
      
      4.2.3 jinfo：Java配置信息工具
          jinfo的作用是实时查看和调整虚拟机的各项参数，使用jps命令的-v可以查看虚拟机启动时显示指定的参数列表。jinfo中-flag选项可以查未被显示指定的
          参数的系统默认值。
          
          jinfo命令格式：
          jinfo [ option ] pid
          执行样例：查询CMSSInitiatingOccupancyFraction参数值。
          C:\>info -flag CMSInitiatingOccupancyFraction 1444
          -XX:CMSInitiatingOccupancyFraction=85
          
      4.2.4 jmap:Java内存映像工具
          jmap命令用于生成堆转储快照（又称heapdump或dump文件），另-XX:+HeapDumpOnOutOfMemoryError参数，可以让虚拟机在OOM异常出现之后自动生成dump
          文件，通过-XX:+HeapDumpOnCtrlBreak参数可以使用[Ctrl]+[Break]键让虚拟机生成dump文件。
          jmap不仅可以获取dump文件，还可以查询finalize执行队列，java堆和永久代的详细信息，如空间使用率、当前作用的是哪种收集器等。
          jmap命令格式：
          jamp [ option ] vmid
          
          
      
      4.2.5 jhat：虚拟机堆转储快照分析工具
      
      4.2.6 jstack：Java堆跟踪工具
      
     
     4.3 JDK可视化工具
     
      4.3.1 JConsole: Java监视与管理控制台
      
      4.3.2 VisualIVM:多合一故障处理工具
      
      
     4.4 小结
